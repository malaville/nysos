<div class="button-container">
  <button
    mat-mini-fab
    [color]="large ? 'warn' : 'primary'"
    (click)="newDocumentClicked()"
  >
    <mat-icon>{{
      large
        ? "close"
        : (documentStateObs | async).bibliography
        ? "edit"
        : "rate_review"
    }}</mat-icon>
  </button>
  <button mat-mini-fab color="primary" (click)="addAChildClicked()">
    <mat-icon>center_focus_strong</mat-icon>
  </button>
  <a
    *ngIf="(documentStateObs | async).bibliography"
    mat-mini-fab
    color="primary"
    [disabled]="!(documentStateObs | async).bibliography?.link"
    [href]="(documentStateObs | async).bibliography?.link"
  >
    <mat-icon>link</mat-icon>
  </a>
</div>

<app-document-title *ngIf="!(documentStateObs | async).bibliography">
  <img
    *ngIf="this.writing"
    style="width: 25px; border-radius: 50%"
    src="/assets/loader.svg"
  />
  <mat-spinner *ngIf="loading" [diameter]="20"></mat-spinner>
  <mat-icon class="green-icon" *ngIf="saved">check_circle</mat-icon>
</app-document-title>

<app-bibliography-details
  [bibliography]="(documentStateObs | async).bibliography"
>
</app-bibliography-details>

<div
  #contentdiv
  id="content-of-document"
  contenteditable="true"
  (input)="onDescriptionChange($event.target.innerHTML)"
  [innerHTML]="(documentStateObs | async).content"
></div>
<div>
  <span *ngFor="let bib of bibliography | async">
    <app-bibliography-link
      [bib]="bib"
      [linkDescriptionChange]="onLinkDescriptionChangeCallback()"
    ></app-bibliography-link>
  </span>
</div>
