<div class="title-and-button-wrapper">
  <h1
    [hidden]="(documentStateObs | async).bibliography"
    #name
    contenteditable="plaintext-only"
    (input)="onNameChange($event.target.innerHTML)"
    (focusout)="onNameOut()"
    (keydown.enter)="unFocus()"
  ></h1>
  <button
    mat-mini-fab
    color="primary"
    *ngIf="!(documentStateObs | async).bibliography"
    (click)="newDocumentClicked()"
  >
    <mat-icon>rate_review</mat-icon>
  </button>
</div>
<ng-container *ngIf="(documentStateObs | async).bibliography">
  <small>{{ (documentStateObs | async).bibliography.acronym }}</small>
  <button mat-icon-button (click)="editDocumentClicked()">
    <mat-icon>edit</mat-icon>
  </button>
  <h2>
    <small
      >{{ (documentStateObs | async).bibliography.author }} ({{
        (documentStateObs | async).bibliography.year
      }})</small
    >
    - {{ (documentStateObs | async).bibliography.title }}
    <small
      ><a
        mat-icon-button
        color="primary"
        [href]="(documentStateObs | async).bibliography.link"
        ><mat-icon>link</mat-icon></a
      ></small
    >
  </h2>
</ng-container>

<div
  id="content-of-document"
  contenteditable="true"
  (input)="onDescriptionChange($event.target.innerHTML)"
  [innerHTML]="(documentStateObs | async).content"
></div>
<span *ngFor="let bib of bibliography">
  <button
    mat-icon-button
    aria-label="Article button"
    (click)="onDocumentClicked(bib.contentId)"
  >
    <mat-icon>article</mat-icon>
  </button>
  {{ bib.acronym }} - {{ bib.title }}<br />
  <div class="document-link-description" contenteditable="plaintext-only">
    {{ bib.description }}
  </div>
</span>
